# 作用域划分

## 顶层作用域（编译期）
- 可读文件、用 npm 库、做预计算。
- 注意：顶层代码可能会执行多次。

## 节点图作用域（运行期）
- 仅支持可编译的 TS 子集。
- `g.server().on(...)` 与 `gstsServer*` 内的代码会被编译。

## 技巧
- `raw(...)` 可让编译器忽略表达式，保留 JS 语义。
- `stage.set` 可作为全局变量使用。
